{% block _instashopapproved_instashop_products_widget %}
    {% set image = form.parent.vars.data %}
    {% set instashopProducts = [] %}
    {% for key, product in image.instashopProducts %}
        {% set instashopProducts = instashopProducts|merge([product.id]) %}
    {% endfor %}
    <div class="form-group row">
        <div class="col-sm-10">
            <label for="catalogs"></label>
            <select id="catalogs" multiple="multiple" type="multiple" name="products[]" class="select2 form-control">
                {% for product in products.all() %}
                    <option value="{{ product.id }}" {% if product.id in instashopProducts %} selected {% endif %}>
                        {{ product.translate(product.currentLocale).name }}. ({{ product.sku }})
                    </option>
                {% endfor %}
            </select>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.select2[name="products[]"]').select2({multiple: 1});
        });
    </script>
{% endblock %}